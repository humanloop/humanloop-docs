---
subtitle: How to log generations from LLMs to Humanloop
description: Learn how to create a Prompt in Humanloop using the UI or SDK, version it, and use it to generate responses from your AI models. Prompt management is a key part of the Humanloop platform.
image: https://app.buildwithfern.com/_next/image?url=https%3A%2F%2Ffdr-prod-docs-files-public.s3.amazonaws.com%2Fhttps%3A%2F%2Fhumanloop.docs.buildwithfern.com%2F2024-05-31T20%3A04%3A53.218Z%2Fassets%2Fimages%2Faae5149-Screenshot_2024-04-04_at_22.36.38.png&w=3840&q=75
---

This guide will show you how to capture [Logs](/docs/concepts/logs) into Humanloop. Logs are the inputs, outputs and metadata of a Prompt, i.e. the generation created by the large language model.

The easiest way to both call the large language model with your Prompt and to log the data is to use the `Prompt.call()` method (see the guide on [Calling a Prompt](/docs/development/guides/calling-prompt)) which will do both in a single API request. However, there are two main reasons why you may wish to log the data seperately from generation:

1. You are using your own model that is not natively supported in the Humanloop runtime.
2. You wish to avoid relying on Humanloop runtime as the proxied calls adds a small additional latency, or

The `humanloop.complete()`and `humanloop.chat()` call encapsulates the LLM provider calls (for example `openai.Completions.create()`), the model-config selection and logging steps in a single unified interface. There may be scenarios that you wish to manage the LLM provider calls directly in your own code instead of relying on Humanloop.

For example, you may be using an LLM provider that currently is not directly supported by Humanloop such as Hugging Face.

To support using your own model provider, we provide additional `humanloop.log()` and `humanloop.projects.get_active_config()` methods in the SDK.

In this guide, we walk through how to use these SDK methods to log data to Humanloop and run experiments.

## Prerequisites

- You already have a Prompt — if not, please follow our [Prompt creation](/docs/guides/create-prompt) guide first.

<Markdown src="../../../snippets/setup-sdk.mdx" />

## Log data to your project

<EndpointRequestSnippet endpoint="POST /prompts/log" />

<Steps>
#### Set up your code to first get your model config from Humanloop, then call your LLM provider to get a completion (or chat response) and then log this,  alongside the inputs, config and output:

```python
from humanloop import Humanloop
import openai

# Initialize Humanloop with your API key
humanloop = Humanloop(api_key="<YOUR Humanloop API KEY>")

project_id = "<YOUR PROJECT ID>"

config = humanloop.projects.get_active_config(id=project_id).config

client = openai.OpenAI(
    # defaults to os.environ.get("OPENAI_API_KEY")
    api_key="<YOUR OPENAI API KEY>",
)

messages = [
    {
        "role": "user",
        "content": "Say this is a test",
    }
]

chat_completion = client.chat.completions.create(
    messages=messages,
    model=config.model,
  	temperature=config.temperature
)

# Parse the output from the OpenAI response.
output = chat_completion.choices[0].message.content

# Log the inputs, outputs and config to your project.
log_response = humanloop.log(
    project_id=project_id,
    messages=messages
    output=output,
    config_id=config.id
)

# Use this ID to associate feedback received later to this datapoint.
data_id = log_response.id
```

#### The process of capturing feedback then uses the returned `data_id` as before.

See our [guide on capturing user feedback](./capture-user-feedback).

#### You can also log immediate feedback alongside the input and outputs:

```
# Log the inputs, outputs and model config to your project.
log_response = humanloop.log(
    project_id=project_id,
    messages=messages
    output=output,
    config_id=config.id,
    feedback={"type": "rating", "value": "good"}
)
```

</Steps>

<Tip title="Hugging Face Example">
Note that you can also use a similar pattern for non-OpenAI LLM providers. For example, logging results from Hugging Face’s Inference API:
 
```python
import requests
from humanloop import Humanloop
 
# Initialize the SDK with your Humanloop API key
humanloop = Humanloop(api_key="<YOUR Humanloop API KEY>")
 
# Make a generation using the Hugging Face Inference API.
response = requests.post(
    "https://api-inference.huggingface.co/models/gpt2",
    headers={"Authorization": f"Bearer {<YOUR HUGGING FACE API TOKEN>}"},
    json={
        "inputs": "Answer the following question like Paul Graham from YCombinator:\n"
        "How should I think about competition for my startup?",
        "parameters": {
            "temperature": 0.2,
            "return_full_text": False,  # Otherwise, Hugging Face will return the prompt as part of the generation.
        },
    },
).json()

# Parse the output from the Hugging Face response.

output = response[0]["generated_text"]

# Log the inputs, outputs and model config to your project.

log_response = humanloop.log(
project=project_id,
inputs={"question": "How should I think about competition for my startup?"},
output=output,
model_config={
"model": "gpt2",
"prompt_template": "Answer the following question like Paul Graham from YCombinator:\n{{question}}",
"temperature": 0.2,
},
)

```
</Tip>
```
