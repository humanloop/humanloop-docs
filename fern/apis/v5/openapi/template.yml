x-fern-pagination:
  offset: $request.page
  results: $response.records

paths:
  /prompts:
    get:
      x-fern-pagination: true
      x-fern-examples:
        - query-parameters:
            size: 1
          response:
            body: { "records": [<<prompt_response>>] }
    post:
      x-fern-examples:
        - name: Upsert prompt
          request: << prompt_request >>
          response:
            body: << prompt_response >>
  /prompts/{id}:
    get:
      x-fern-examples:
        - name: Get specific prompt
          path-parameters:
            id: "pr_30gco7dx6JDq4200GVOHa"
          response:
            body: << prompt_response >>
    delete:
      x-fern-examples:
        - name: Delete prompt
          path-parameters:
            id: "pr_30gco7dx6JDq4200GVOHa"
    patch:
      x-fern-examples:
        - name: Move prompt
          path-parameters:
            id: "pr_30gco7dx6JDq4200GVOHa"
          request:
            path: "new directory/new name"
          response:
            body: << prompt_response >>
  /prompts/{id}/versions:
    get:
      x-fern-examples:
        - name: List versions
          path-parameters:
            id: "pr_30gco7dx6JDq4200GVOHa"
          query-parameters:
            status: "committed"
            environment:
          response:
            body:
              records:
                - <<prompt_response>>

  /prompts/{id}/versions/{version_id}/commit:
    post:
      x-fern-examples:
        - name: Commit version
          path-parameters:
            id: "pr_30gco7dx6JDq4200GVOHa"
            version_id: "prv_F34aba5f3asp0"
          request:
            commit_message: "Reiterated point about not discussing sentience"
          response:
            body: << prompt_response >>

  /prompts/log:
    post:
      x-fern-examples:
        - name: Log prompt
          request: << prompt_log_request >>
          response:
            body: << prompt_log_response >>
  /prompts/call:
    post:
      x-fern-examples:
        - name: Simple
          request: << prompt_call_request >>
          response:
            body: << prompt_call_response >>
  /prompts/{id}/evaluators:
    post:
      x-fern-examples:
        - name: Add evaluator
          path-parameters:
            id: "pr_30gco7dx6JDq4200GVOHa"
          request:
            evaluators_to_activate:
              - evaluator_version_id: "evv_1abc4308abd"
          response:
            body: << prompt_response >>

  /tools:
    get:
      x-fern-pagination: true
      x-fern-examples:
        - name: List tools
          query-parameters:
            size: 1
          response:
            body: << tool_response >>

  /datasets:
    get:
      x-fern-pagination: true
      x-fern-examples:
        - name: List datasets
          query-parameters:
            size: 1
          response:
            body:
              {
                "records": [<< dataset_response >>],
                "page": 0,
                "size": 1,
                "total": 1,
              }
    post:
      x-fern-examples:
        - name: Create dataset
          request: << create_dataset_request >>
          response:
            body: << create_dataset_response >>

  /datasets/{id}:
    get:
      x-fern-examples:
        - name: Get dataset
          path-parameters:
            id: "ds_b0baF1ca7652"
          query-parameters:
            version_id: "dsv_6L78pqrdFi2xa"
            include_datapoints: true
          response:
            body: << dataset_with_datapoints_response >>
  delete:
    x-fern-examples:
      - name: Delete dataset
        path-parameters:
          id: "ds_b0baF1ca7652"
  patch:
    x-fern-examples:
      - name: Move dataset
        path-parameters:
          id: "ds_b0baF1ca7652"
        request:
          path: "new directory/new name"
        response:
          body: << update_dataset_response >>

  /datasets/{id}/datapoints:
    get:
      x-fern-pagination: true
      x-fern-examples:
        - name: List datapoints
          path-parameters:
            id: "ds_b0baF1ca7652"
          query-parameters:
            size: 1
          response:
            body: << datapoint_response >>

  /datasets/{id}/versions:
    get:
      x-fern-examples:
        - name: List versions
          path-parameters:
            id: "ds_b0baF1ca7652"
          query-parameters:
            status: "committed"
          response:
            body:
              records: [<< dataset_response >>]

  /datasets/{id}/versions/{version_id}/commit:
    post:
      x-fern-examples:
        - name: Commit version
          path-parameters:
            id: "ds_b0baF1ca7652"
            version_id: "dsv_6L78pqrdFi2xa"
          request:
            commit_message: "initial commit"
          response:
            body: << dataset_response >>

  /datasets/{id}/datapoints/logs:
    post:
      x-fern-examples:
        - name: Add datapoints from logs
          path-parameters:
            id: "ds_b0baF1ca7652"
          query-parameters:
            version_id: "dsv_6L78pqrdFi2xa"
          request:
            log_ids: ["log_11bWuC239S0h", "log_4d52GH6da2eGf"]
            commit_message: "initial commit"
          response:
            body: << dataset_response >>

  /datasets/{id}/environments/{environment_id}:
    post:
      x-fern-examples:
        - name: Deploy
          path-parameters:
            id: "ds_b0baF1ca7652"
            environment_id: "staging"
          request:
            version_id: "dsv_6L78pqrdFi2xa"
          response:
            body: << dataset_response >>

    delete:
      x-fern-examples:
        - name: Delete environment
          path-parameters:
            id: "ds_b0baF1ca7652"
            environment_id: "staging"

  /datasets/{id}/environments
    get:
      x-fern-examples:
        - name: List environments
          path-parameters:
            id: "ds_b0baF1ca7652"
          response:
            body:
              records:
                - << environment_response >>

  # /evaluations:
  #   get:
  #     x-fern-pagination: true
  #     x-fern-examples:
  #       - name: List evaluations
  #         query-parameters:
  #           file_id: "file_123abc"
  #           size: 10
  #         response:
  #           body: << evaluation_response >>

  # /evaluators:
  #   get:
  #     x-fern-pagination: true
  #     x-fern-examples:
  #       - name: List evaluators
  #         request:
  #           query-parameters:
  #             size: 10
  #         response:
  #           body: << evaluator_response >>

  /logs:
    get:
      x-fern-pagination: true
      x-fern-examples:
        - name: List logs
          query-parameters:
            file_id: "file_123abc"
            size: 1
          response:
            body: << log_response >>

  /sessions:
    get:
      x-fern-pagination: true
      x-fern-examples:
        - name: List sessions
          query-parameters:
            size: 1
          response:
            body: << session_response >>

  /tools/log:
    post:
      x-fern-examples:
        - name: Tool log
          request: << tool_log_request >>
          response:
            body: << tool_log_response >>

components:
  schemas:
    Body_Evaluations_updateStatus:
      x-fern-type-name: UpdateEvaluationStatusRequest
    PaginatedData_DatapointResponse_:
      x-fern-type-name: PaginatedDatapointResponse
    PaginatedData_DatasetResponse_:
      x-fern-type-name: PaginatedDatasetResponse
    PaginatedData_EvaluationResponse_:
      x-fern-type-name: PaginatedEvaluationResponse
    PaginatedData_PromptLogResponse_:
      x-fern-type-name: PaginatedPromptLogResponse
    PaginatedData_SessionResponse_:
      x-fern-type-name: PaginatedSessionResponse
    src__domain__chat_types__enums__ToolType:
      x-fern-type-name: ChatToolType
    src__domain__files__tool__ToolType:
      x-fern-type-name: FilesToolType
    src__external__app__models__v4__configs__ToolResponse:
      x-fern-type-name: ConfigToolResponse
    src__external__app__models__v4__feedback__FeedbackType:
      x-fern-type-name: FeedbackType
    src__external__app__models__v4__orgs__base_models__UserResponse:
      x-fern-type-name: BaseModelsUserResponse
    src__external__app__models__v5__datasets__DatasetRequest:
      x-fern-type-name: DatasetsRequest
    src__external__app__models__v5__evaluations__DatasetRequest:
      x-fern-type-name: EvaluationsDatasetRequest
    src__external__app__models__v5__evaluations__EvaluatorRequest:
      x-fern-type-name: EvaluationsRequest
    src__external__app__models__v5__evaluators__EvaluatorRequest:
      x-fern-type-name: EvaluatorsRequest
    src__external__app__models__v5__feedback__FeedbackType:
      x-fern-type-name: FeedbackType
    src__external__app__models__v5__tools__ToolResponse:
      x-fern-type-name: ToolResponse
    src__external__app__models__v5__users__UserResponse:
      x-fern-type-name: UserResponse
  securitySchemes:
    APIKeyHeader:
      x-fern-header:
        env: HUMANLOOP_API_KEY
